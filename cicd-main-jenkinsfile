pipeline 
{
agent any
stages
{  
stage('checkout scm')
{
steps
{
git branch: 'master', url: 'https://github.com/sreedevops26/cicd-main.git'
}
}
stage('build docker image using Dockerfile')
{
steps
{
sh 'docker build -t  sreedevops26/mydevops:2019.3 .'
}
}
stage('push docker image into registry')
{
steps
{
withDockerRegistry(credentialsId: 'regcred', url: 'https://index.docker.io/v1/') 
{
    sh 'docker push sreedevops26/mydevops:2019.3'
}
}
}
}
}
